<div class="modal fade" id="modal-batch-update-georesources" role="dialog">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">

			<div align="center">
				<div class="loading-overlay-admin-panel ng-hide" ng-show="loadingData">
					<span class="glyphicon glyphicon-refresh icon-spin"></span>
				</div>
			</div>


			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Batch-Update</h4>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<p>Diese Funktion erm&ouml;glicht es, die Mapping-Parameter mehrerer Georessoucen gleichzeitig zu aktualisieren.</p>
						<p><b>* = Pflichtfeld</b></p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<form id="georesourceBatchUpdateForm" class="form-group" role="form" data-toggle="validator" data-disable="true">
							<div class="batch-list-table-wrapper table-responsive">
								<table class="batch-list-table table table-bordered table-condensed table-striped" style="width:100%; overflow:auto; font-size: 11px;">
									<thead>
										<tr>
											<th class="batch-list-table-sticky-column batch-list-table-sticky-column-header batch-list-table-sticky-column-1"><input type="checkbox" ng-model="allRowsSelected" ng-change="$ctrl.kommonitorBatchUpdateHelperServiceInstance.onChangeSelectAllRows(this.allRowsSelected, this.batchList)"></th>
											<th class="batch-list-table-sticky-column batch-list-table-sticky-column-header batch-list-table-sticky-column-2">Name*</th>
											<th>Mappingtabelle</th>
											<th>G&uuml;ltigkeitszeitraum von*</th>
											<th>G&uuml;ltigkeitszeitraum bis</th>
											<th>Geodaten-Quellformat*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).length">Quellformat*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('GeoJSON') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Shapefile (ZIP-Ordner mit .shp, .dbf, .prj)') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">CRS*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">Hausnummer_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">Strasse_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette')">Adresse_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Strasse_Hausnummer_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">X_Koordinatenspalte_Rechtswert*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">Y_Koordinatenspalte_Hochwert*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Postleitzahl_Spaltenname</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Stadt_Spaltenname</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">Schema*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">NAMESPACE</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">SCHEMA_LOCATION</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">Trennzeichen</th>
											<th>Datenquelltyp*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsFile(batchList)">Datei*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsHttp(batchList)">URL*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsInline(batchList)">Payload*</th>
											<th>ID Attributname*</th>
											<th>NAME Attributname*</th>
											<th>Lebenszeit-Beginn Attributname</th>
											<th>Lebenszeit-Ende Attributname</th>
											<th>Mappingtabelle speichern</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="georesource in batchList" ng-class-odd="'batch-list-odd-rows'" ng-class-even="'batch-list-even-rows'">

											<!-- isSelected -->
											<td class="batch-list-table-sticky-column batch-list-table-sticky-column-1">
												<input type="checkbox" ng-model="georesource.isSelected">
											</td>

											<!-- Name -->
											<td class="batch-list-table-sticky-column batch-list-table-sticky-column-2">
												<ui-select id="georesourceSelect{{$index}}" class="form-control batch-list-table-name-field" ng-model="georesource.name" 
													ng-change="$ctrl.kommonitorBatchUpdateHelperServiceInstance.resizeNameColumnDropdowns(georesource)" required>
													<ui-select-match>
														<span ng-bind="$select.selected.datasetName"></span>
													</ui-select-match>
													<ui-select-choices repeat="avGeoresource in $ctrl.kommonitorDataExchangeServiceInstance.availableGeoresources | filterGeoresoures: {georesourceName: $select.search}">
														<span ng-bind="avGeoresource.datasetName"></span>
													</ui-select-choices>
												</ui-select>
											</td>
											
											<!-- Mappingtabelle -->
											<td>
												<input id="georesourceMappingTableSelect{{$index}}" class="form-control georesourceMappingTableInputField" type="file">
											</td>

											<!-- Gültigkeitszeitraum von -->
											<td>
												<div class="input-group date">
													<div class="input-group-addon">
														<i class="far fa-calendar-alt"></i>
													</div>
													<input id="georesourcePeriodOfValidityStartDatePicker{{$index}}" class="form-control pull-right" type="text"  placeholder="YYYY-MM-DD"
														value={{georesource.periodOfValidityStart}} ng-model="georesource.mappingObj.periodOfValidity.startDate" required>
												</div>
											</td>

											<!-- Gültigkeitszeitraum bis -->
											<td>
												<div class="input-group date">
													<div class="input-group-addon">
														<i class="far fa-calendar-alt"></i>
													</div>
													<input id="georesourcePeriodOfValidityEndDatePicker{{$index}}" type="text" class="form-control pull-right" placeholder="YYYY-MM-DD"
														value={{georesource.periodOfValidityEnd}} ng-model="georesource.mappingObj.periodOfValidity.endDate">
												</div>
											</td>


											<!-- Geodaten-Quellformat -->
											<td>
												<select class="form-control" ng-model="georesource.selectedConverter"
														ng-options="converter as converter.name for converter in $ctrl.kommonitorImporterHelperServiceInstance.availableConverters | filter:$ctrl.kommonitorImporterHelperServiceInstance.filterConverters('georesource')" required>
																<option disabled selected value> -- Geodaten-Quellformat w&auml;hlen -- </option>
												</select>
											</td>

											<!-- Quellformat -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).length>0">
												<select class="form-control" ng-model="georesource.mappingObj.converter.mimeType" 
													ng-options="mimeType for mimeType in georesource.selectedConverter.mimeTypes" required>
													<option disabled selected value> -- Quellformat w&auml;hlen -- </option>
												</select>
											</td>

											<!-- CRS -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('GeoJSON') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Shapefile (ZIP-Ordner mit .shp, .dbf, .prj)') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
												<input id="georesourceCrsInputField{{$index}}" class="form-control" ng-model="georesource.mappingObj.converter.crs"
												type="text" placeholder="z.B. EPSG:4326" required>
											</td>

											<!-- Hausnummer_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.hnrColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')" required>
											</td>

											<!-- Strasse_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.streetColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')" required>
											</td>

											<!-- Adresse_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.addressColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_Geokodierung_beliebige_Zeichenkette')" required>
											</td>

											<!-- Strasse_Hausnummer_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.streetHnrColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')" required>
											</td>

											<!-- X_Koordinatenspalte_Rechtswert -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.xCoordColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_XY_Koordinate_zu_Punkt')" required>
											</td>

											<!-- Y_Koordinatenspalte_Rechtswert -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.yCoordColumnName"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('Tabelle_XY_Koordinate_zu_Punkt')" required>
											</td>

											<!-- Postleitzahl_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.plzColumnName"
												type="text" ng-disabled="!['Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten', 'Tabelle_Geokodierung_Strasse_Hausnummer_Stadt'].includes(georesource.selectedConverter.name)">
											</td>

											<!-- Stadt_Spaltenname -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.cityColumnName"
												type="text" ng-disabled="!['Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten', 'Tabelle_Geokodierung_Strasse_Hausnummer_Stadt'].includes(georesource.selectedConverter.name)">
											</td>

											<!-- schema -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
												<select class="form-control" ng-model="georesource.mappingObj.converter.schema" 
													ng-options="schema for schema in georesource.selectedConverter.schemas"
													ng-disabled="!georesource.selectedConverter.name.includes('WFS_v1')" required>
													<option disabled selected value> -- Schema w&auml;hlen -- </option>
												</select>
											</td>

											<!-- NAMESPACE -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.schemaNamespace"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('WFS_v1')">
											</td>

											<!-- SCHEMA_LOCATION -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.schemaLocation"
												type="text" ng-disabled="!georesource.selectedConverter.name.includes('WFS_v1')">
											</td>

											<!-- Trennzeichen -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">
												<input class="form-control" ng-model="georesource.mappingObj.converter.separator"
												type="text" ng-disabled="!['Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten', 'Tabelle_Geokodierung_beliebige_Zeichenkette', 'Tabelle_Geokodierung_Strasse_Hausnummer_Stadt', 'Tabelle_XY_Koordinate_zu_Punkt'].includes(georesource.selectedConverter.name)">
											</td>

											<!-- Datenquelltyp -->
											<td>
												<select ng-model="georesource.selectedDatasourceType"
														ng-options="datasourceType as datasourceType.type for datasourceType in $ctrl.kommonitorImporterHelperServiceInstance.availableDatasourceTypes"
														class="form-control" required>
																<option disabled selected value> -- Quelltyp w&auml;hlen -- </option>
												</select>
											</td>

											<!-- Datei -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsFile(batchList)">
												<input id="georesourceDataSourceFileInputField{{$index}}" class="form-control georesourceDataSourceFileInputField" type="file" 
												ng-disabled="!georesource.selectedDatasourceType.type.includes('FILE')" required>
											</td>

											<!-- URL -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsHttp(batchList)">
												<input class="form-control" type="text" ng-model="georesource.mappingObj.dataSource.url"
												ng-disabled="!georesource.selectedDatasourceType.type.includes('HTTP')" required>
											</td>

											<!-- Payload -->
											<td ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsInline(batchList)">
												<input class="form-control" type="text" ng-model="georesource.mappingObj.dataSource.payload"
												ng-disabled="!georesource.selectedDatasourceType.type.includes('INLINE')" required>
											</td>

											<!-- ID Attributname -->
											<td>
												<input class="form-control" ng-model="georesource.mappingObj.propertyMapping.identifierProperty" type="text" required>
											</td>

											<!-- NAME Attributname -->
											<td>
												<input class="form-control" ng-model="georesource.mappingObj.propertyMapping.nameProperty" type="text" required>
											</td>

											<!-- Lebenszeit-Beginn Attributname -->
											<td>
												<input class="form-control" ng-model="georesource.mappingObj.propertyMapping.validStartDateProperty" type="text" required>
											</td>

											<!-- Lebenszeit-Ende Attributname -->
											<td>
												<input class="form-control" ng-model="georesource.mappingObj.propertyMapping.validEndDateProperty" type="text" required>
											</td>

											<!-- Speichern -->
											<td>
												<button id="georesourceMappingTableSave{{$index}}" type="button" class="btn btn-primary fas fa-save" 
													ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.saveMappingObjectToFile('georesource', $event, batchList)" >
												</button>
											</td>

										</tr>
									</tbody>

									<tfoot>
										<tr>
											<th class="batch-list-table-sticky-column batch-list-table-sticky-column-footer batch-list-table-sticky-column-1"><input type="checkbox" ng-model="allRowsSelected" ng-change="$ctrl.kommonitorBatchUpdateHelperServiceInstance.onChangeSelectAllRows(this.allRowsSelected, this.batchList)"></th>
											<th class="batch-list-table-sticky-column batch-list-table-sticky-column-footer batch-list-table-sticky-column-2">Name*</th>
											<th>Mappingtabelle</th>
											<th>G&uuml;ltigkeitszeitraum von*</th>
											<th>G&uuml;ltigkeitszeitraum bis</th>
											<th>Geodaten-Quellformat*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).length">Quellformat*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('GeoJSON') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Shapefile (ZIP-Ordner mit .shp, .dbf, .prj)') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt') ||
											$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">CRS*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">Hausnummer_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">Strasse_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette')">Adresse_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Strasse_Hausnummer_Spaltenname*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">X_Koordinatenspalte_Rechtswert*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">Y_Koordinatenspalte_Hochwert*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Postleitzahl_Spaltenname</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">Stadt_Spaltenname</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">Schema*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">NAMESPACE</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">SCHEMA_LOCATION</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt') ||
														$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">Trennzeichen</th>
											<th>Datenquelltyp*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsFile(batchList)">Datei*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsHttp(batchList)">URL*</th>
											<th ng-show="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsInline(batchList)">Payload*</th>
											<th>ID Attributname*</th>
											<th>NAME Attributname*</th>
											<th>Lebenszeit-Beginn Attributname</th>
											<th>Lebenszeit-Ende Attributname</th>
											<th>Mappingtabelle speichern</th>
										</tr>
									</tfoot>
								</table>
							</div>

							<button type="button" class="btn btn-primary" ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.addNewRowToBatchList('georesource', this.batchList)">neue Zeile hinzuf&uuml;gen</button>
							<button type="button" class="btn btn-danger" ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.deleteSelectedRowsFromBatchList(this.batchList, this.allRowsSelected)">ausgewählte Zeilen l&ouml;schen</button>
						</div>
					</form>
				</div>
				<div class="row">
					<div class="col-md-4 col-sm-4 col-xs-6">
						<div class="form-group">
							<label>Standardwert-Funktion</label>
							<div class="help-block">
								<p>
									Diese Funktion ermöglicht es, einen Standardwert für alle Zeilen einer variablen Tabellenspalte zu setzen.<br />
									Sofern die Checkbox aktiviert ist, wird der Wert für alle Zeilen gesetzt.<br />
									Ist sie deaktiviert, werden nur leere Tabellenfelder überschrieben, sodass bereits eingetragene Werte erhalten bleiben.<br />
									Gesperrte (ausgegraute) Felder werden ignoriert.
								</p>
							</div>
							<div class="row">
								<div class="col-md-6 col-sm-6 col-xs-6">
									<label for="georesourceColDefaultFunctionColSelectInput">Tabellenspalte:</label>
									<select id="georesourceColDefaultFunctionColSelectInput" class="form-control"
										ng-model="colDefaultFunctionSelectedColumn" ng-change="colDefaultFunctionNewValue=undefined">
										<option disabled selected value> -- Tabellenspalte w&auml;hlen -- </option>
										<option value="mappingObj.periodOfValidity.startDate">G&uuml;ltigkeitszeitraum von*</option>
										<option value="mappingObj.periodOfValidity.endDate">G&uuml;ltigkeitszeitraum bis</option>
										<option value="selectedConverter">Geodaten-Quellformat*</option>
										<option value="mappingObj.converter.mimeType">Quellformat*</option>
										<option value="mappingObj.converter.crs">CRS*</option>
										<option value="mappingObj.converter.hnrColumnName">Hausnummer_Spaltenname*</option>
										<option value="mappingObj.converter.streetColumnName">Strasse_Spaltenname*</option>
										<option value="mappingObj.converter.addressColumnName">Adresse_Spaltenname*</option>
										<option value="mappingObj.converter.streetHnrColumnName">Strasse_Hausnummer_Spaltenname*</option>
										<option value="mappingObj.converter.xCoordColumnName">X_Koordinatenspalte_Rechtswert*</option>
										<option value="mappingObj.converter.yCoordColumnName">Y_Koordinatenspalte_Hochwert*</option>
										<option value="mappingObj.converter.plzColumnName">Postleitzahl_Spaltenname</option>
										<option value="mappingObj.converter.cityColumnName">Stadt_Spaltenname</option>
										<option value="mappingObj.converter.schema">Schema*</option>
										<option value="mappingObj.converter.schemaNamespace">NAMESPACE</option>
										<option value="mappingObj.converter.schemaLocation">SCHEMA_LOCATION</option>
										<option value="mappingObj.converter.separator">Trennzeichen</option>
										<option value="selectedDatasourceType">Datenquelltyp*</option>
										<!-- File is not supported here -->
										<option value="mappingObj.dataSource.url">URL*</option>
										<option value="mappingObj.dataSource.payload">Payload*</option>
										<option value="mappingObj.propertyMapping.identifierProperty">ID Attributname*</option>
										<option value="mappingObj.propertyMapping.nameProperty">NAME Attributname*</option>
										<option value="mappingObj.propertyMapping.validStartDateProperty">Lebenszeit-Beginn Attributname</option>
										<option value="mappingObj.propertyMapping.validEndDateProperty">Lebenszeit-Ende Attributname</option>
									</select>
									<label>Wert:</label>

									<!-- default -->
									<input ng-show="!colDefaultFunctionSelectedColumn" type="text" class="form-control" ng-model="colDefaultFunctionNewValue" disabled placeholder="keine Tabellenspalte ausgew&auml;hlt"></input>
									
									<!-- Gültigkeitszeitraum von* -->
									<div ng-show="colDefaultFunctionSelectedColumn=='mappingObj.periodOfValidity.startDate'"
										class="input-group date">
										<div class="input-group-addon">
											<i class="far fa-calendar-alt"></i>
										</div>
										<input id="georesourceDefaultColumnDatePickerStart" class="form-control pull-right" type="text"  placeholder="YYYY-MM-DD"
											value={{colDefaultFunctionNewValue}} ng-model="colDefaultFunctionNewValue">
									</div>

									<!-- Gültigkeitszeitraum bis* -->
									<div ng-show="colDefaultFunctionSelectedColumn=='mappingObj.periodOfValidity.endDate'"
										class="input-group date">
										<div class="input-group-addon">
											<i class="far fa-calendar-alt"></i>
										</div>
										<input id="georesourceDefaultColumnDatePickerEnd" class="form-control pull-right" type="text"  placeholder="YYYY-MM-DD"
											value={{colDefaultFunctionNewValue}} ng-model="colDefaultFunctionNewValue">
									</div>

									<!-- Geodaten-Quellformat* -->
									<select ng-show="colDefaultFunctionSelectedColumn=='selectedConverter'" class="form-control" ng-model="colDefaultFunctionNewValue"
										ng-options="converter as converter.name for converter in $ctrl.kommonitorImporterHelperServiceInstance.availableConverters | filter:$ctrl.kommonitorImporterHelperServiceInstance.filterConverters('georesource')">
											<option disabled selected value> -- Geodaten-Quellformat w&auml;hlen -- </option>
									</select>

									<!-- Quellformat* -->
									<!-- Only enable this field if every row has the same converter selected.
										This is why we can use the values of the converter of the first row here, because all other rows should be the same. -->
									<select ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.mimeType'" class="form-control" ng-model="colDefaultFunctionNewValue"
									ng-options="mimeType for mimeType in $ctrl.kommonitorBatchUpdateHelperServiceInstance.getConverterObjectByName(batchList[0].selectedConverter.name).mimeTypes"
									ng-disabled="$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).length != 1">
										<option disabled selected value> -- Quellformat w&auml;hlen -- </option>
									</select>
									</td>
									<!-- CRS* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.crs'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue" placeholder="z.B. EPSG:4326"
										ng-disabled="!($ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('GeoJSON') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Shapefile (ZIP-Ordner mit .shp, .dbf, .prj)') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1'))">
									</input>

									<!-- Hausnummer_Spaltenname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.hnrColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">
									</input>

									<!-- Strasse_Spaltenname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.streetColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten')">
									</input>

									<!-- Adresse_Spaltenname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.addressColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette')">
									</input>

									<!-- Strasse_Hausnummer_Spaltenname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.streetHnrColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt')">
									</input>

									<!-- X_Koordinatenspalte_Rechtswert* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.xCoordColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">
									</input>

									<!-- Y_Koordinatenspalte_Rechtswert* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.yCoordColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt')">
									</input>

									<!-- Postleitzahl_Spaltenname -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.plzColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!($ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt'))">
									</input>

									<!-- Stadt_Spaltenname -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.cityColumnName'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!($ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt'))">
									</input>

									<!-- Schema* -->
									<select ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.schema'" class="form-control" ng-model="colDefaultFunctionNewValue" 
										ng-options="schema for schema in $ctrl.kommonitorBatchUpdateHelperServiceInstance.getConverterObjectByName('WFS_v1').schemas"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
											<option disabled selected value> -- Schema w&auml;hlen -- </option>
									</select>
									
									<!-- NAMESPACE -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.schemaNamespace'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
									</input>
									
									<!-- SCHEMA LOCATION -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.schemaLocation'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('WFS_v1')">
									</input>

									<!-- Trennzeichen -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.converter.separator'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue"
										ng-disabled="!($ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Adresse_strukturierte_Einzelspalten') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_beliebige_Zeichenkette') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_Geokodierung_Strasse_Hausnummer_Stadt') ||
													$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkColumnsToShow_selectedConverter(batchList).includes('Tabelle_XY_Koordinate_zu_Punkt'))">
									</input>
									
									<!-- Datenquelltyp* -->
									<select ng-show="colDefaultFunctionSelectedColumn=='selectedDatasourceType'" class="form-control" ng-model="colDefaultFunctionNewValue"
										ng-options="datasourceType as datasourceType.type for datasourceType in $ctrl.kommonitorImporterHelperServiceInstance.availableDatasourceTypes">
											<option disabled selected value> -- Quelltyp w&auml;hlen -- </option>
									</select>
									<!-- URL* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.dataSource.url'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue" ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsHttp(batchList)">
									</input>
									<!-- Payload* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.dataSource.payload'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue" ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfSelectedDatasourceTypeIsInline(batchList)">
									</input>
									<!-- ID Attributname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.propertyMapping.identifierProperty'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue">
									</input>
									<!-- NAME Attributname* -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.propertyMapping.nameProperty'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue">
									</input>
									<!-- Lebenszeit-Beginn Attributname -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.propertyMapping.validStartDateProperty'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue">
									</input>
									<!-- Lebenszeit-Ende Attributname -->
									<input ng-show="colDefaultFunctionSelectedColumn=='mappingObj.propertyMapping.validEndDateProperty'" type="text" class="form-control"
										ng-model="colDefaultFunctionNewValue">
									</input>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12 col-sm-12 col-xs-12">
									<label for="georesourceColDefaultFunctionAllRowsChb">Vorhandene Werte überschreiben?</label>
									<input id="georesourceColDefaultFunctionAllRowsChb" type="checkbox" ng-model="colDefaultFunctionAllRowsChb">
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<button type="button" class="btn btn-primary"
										ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.onClickSaveColDefaultValue('georesource', colDefaultFunctionSelectedColumn, colDefaultFunctionNewValue, colDefaultFunctionAllRowsChb, batchList)">
										Standardwert eintragen
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4 col-sm-4 col-xs-6">
						<div class="form-group">
							<label>Fehlende/NULL Werte beibehalten*</label>
							<br/>	
							<label class="switch">
								<input type="checkbox" value="keepMissingValues" ng-model="keepMissingValues">
								<span class="switchslider round"></span>
							</label>
							<div class="help-block">
								<p>Angabe, ob fehlende Attribute oder leere Attributwerte (<code>NULL</code>-Werte) &uuml;bernommen werden. Bei deaktivierter Option 
									wird bei einem solchen Fall ein Fehler geworfen.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Schlie&szlig;en</button>
				<button type="button" class="btn btn-info pull-left" ng-click="loadGeoresourcesBatchList()"
					title="Importieren der Batch-Liste aus einer Datei">
					<i class="fas fa-file-import"></i>&nbsp;&nbsp;Batch-Liste importieren
				</button>

				<input style="display:none;" class="pull-left" type="file" class="form-control"
					id="georesourcesBatchListFile" accept=".json,"></input>

				<button type="button" style="margin-left: 6px;" class="btn btn-info pull-left" ng-disabled=""
					ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.saveBatchListToFile('georesource', batchList, true, keepMissingValues)" title="Exportieren der Batch-Liste in eine Datei">
					<i class="fas fa-file-export"></i>&nbsp;&nbsp;Batch-Liste exportieren
				</button>

				<button id="georesource-reopen-results-btn" type="button" class="btn btn-info"
					ng-click="reopenResultModal()" ng-disabled="lastUpdateResponseObj===undefined">Ergebnis anzeigen
				</button>

				<button id="georesource-batch-update-btn" type="button" class="btn btn-success"
					ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.batchUpdate('georesource', batchList)" ng-disabled="!$ctrl.kommonitorBatchUpdateHelperServiceInstance.checkIfNameAndFilesChosenInEachRow('georesource', batchList)">Update ausführen
				</button>
				
				<button type="button" class="btn btn-danger"
				ng-click="$ctrl.kommonitorBatchUpdateHelperServiceInstance.resetBatchUpdateForm('georesource', batchList)">Zur&uuml;cksetzen
				</button>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->