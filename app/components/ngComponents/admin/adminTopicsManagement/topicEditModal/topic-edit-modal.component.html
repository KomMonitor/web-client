<div class="modal-header">
  <button type="button" class="close" aria-label="Close" (click)="cancel()">
    <span aria-hidden="true">&times;</span>
  </button>
  <h4 class="modal-title">Metadaten des Themeneintrags <i><b>{{currentTopic?.topicName}}</b></i> editieren</h4>
</div>

<div class="modal-body">
  <div align="center">
    <div class="loading-overlay-admin-panel" *ngIf="isSubmitting">
      <span class="glyphicon glyphicon-refresh icon-spin"></span>
    </div>
  </div>

  <p><b><i>* = Pflichtfeld</i></b></p>

  <form [formGroup]="topicForm" (ngSubmit)="onSubmit()" class="form-group" style="margin-bottom: 0px;">
    <h4>Themen Metadaten</h4>

    <div class="row vertical-align">
      <div class="col-md-5">
        <label>Name des Eintrags*</label>
        <input 
          style="width:100%;" 
          class="form-control" 
          type="text" 
          placeholder="Titel des Eintrags" 
          formControlName="name" 
          required
        >
        <div class="help-block with-errors" *ngIf="topicForm.get('name')?.invalid && topicForm.get('name')?.touched">
          Name ist erforderlich
        </div>
      </div>
      <div class="col-md-7">
        <label>Beschreibung des Eintrags*</label>
        <textarea 
          style="width:100%;" 
          rows="5" 
          class="form-control" 
          placeholder="Beschreibung des Eintrags" 
          formControlName="description" 
          required
        ></textarea>
        <div class="help-block with-errors" *ngIf="topicForm.get('description')?.invalid && topicForm.get('description')?.touched">
          Beschreibung ist erforderlich
        </div>
      </div>
    </div>
  </form>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-default pull-left" (click)="cancel()">Schlie&szlig;en</button>
  <button 
    type="button" 
    class="btn btn-success" 
    [disabled]="topicForm.invalid || isSubmitting"
    (click)="onSubmit()"
  >
    <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm mr-1"></span>
    Eintrag aktualisieren
  </button>
</div>

<div *ngIf="successMessage" class="alert alert-success alert-dismissable" style="position: absolute; bottom: 0px; width: 100%;">
  <button type="button" class="close" (click)="hideSuccessAlert()" aria-hidden="true">&times;</button>
  <h4><i class="icon fa fa-check"></i>Themeneintrag aktualisiert</h4>
  Die Metadaten des Eintrags mit Namen {{currentTopic?.topicName}} wurden in KomMonitor aktualisiert.
</div>

<div *ngIf="errorMessage" class="alert alert-danger alert-dismissable" style="position: absolute; bottom: 0px; width: 100%;">
  <button type="button" class="close" (click)="hideErrorAlert()" aria-hidden="true">&times;</button>
  <h4><i class="icon fa fa-ban"></i>Aktualisierung gescheitert</h4>
  Bei der Aktualisierung der Metadaten des Themeneintrags ist ein Fehler aufgetreten. Fehlermeldung:
  <br/>
  <pre>{{errorMessage}}</pre>
</div> 